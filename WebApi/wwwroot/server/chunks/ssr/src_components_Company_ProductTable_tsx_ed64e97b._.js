module.exports=[53727,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(96369),e=a.i(39323),f=a.i(63373),g=a.i(60123),h=a.i(6704),i=a.i(39906);let j={categoryId:"",categoryTypeId:"",branchId:"",quantity:"",minStockLevel:"",name:"",description:"",unit:"",costPrice:"",wholesalePrice:"",sellPrice:""};function k({open:a,mode:f,initialData:i,onClose:k,onSubmit:m}){let[n,o]=(0,c.useState)(j),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)([]);(0,c.useEffect)(()=>{a&&Promise.all([g.CompanyService.getAllCategory(),g.CompanyService.getAllCategoryTypes(),g.CompanyService.getAllBranches()]).then(([a,b,c])=>{s(a.data.data||[]),u(b.data.data||[]),w(c.data.data||[])}).catch(()=>h.default.error("Failed to load dropdown data"))},[a]),(0,c.useEffect)(()=>{o("edit"===f&&i?i:j)},[f,i,a]);let x=(a,b)=>o(c=>({...c,[a]:b})),y=async()=>{(n.name?n.categoryId?n.categoryTypeId?!n.branchId&&(h.default.error("Branch is required"),1):(h.default.error("Category type is required"),1):(h.default.error("Category is required"),1):(h.default.error("Product name is required"),1))||p||(q(!0),await m(n),q(!1))};return a?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-200",children:(0,b.jsxs)("div",{className:"w-full max-w-4xl mx-4 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-800 animate-in zoom-in-95 duration-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-gray-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"add"===f?"Add New Product":"Edit Product"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"add"===f?"Fill in the details to add a new product":"Update the product information"})]})]}),(0,b.jsx)("button",{onClick:k,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors duration-200",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(l,{label:"Product Name",required:!0,children:(0,b.jsx)(e.default,{value:n.name,onChange:a=>x("name",a.target.value),placeholder:"Enter product name",className:"w-full"})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(l,{label:"Quantity",children:(0,b.jsx)(e.default,{type:"number",value:n.quantity,onChange:a=>x("quantity",a.target.value),placeholder:"0",min:"0"})}),(0,b.jsx)(l,{label:"Min Stock Level",children:(0,b.jsx)(e.default,{type:"number",value:n.minStockLevel,onChange:a=>x("minStockLevel",a.target.value),placeholder:"0",min:"0"})})]}),(0,b.jsx)(l,{label:"Category",required:!0,children:(0,b.jsxs)("select",{className:"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200",value:n.categoryId,onChange:a=>x("categoryId",a.target.value),children:[(0,b.jsx)("option",{value:"",className:"text-gray-400",children:"Select Category"}),r.map(a=>(0,b.jsx)("option",{value:a.id,className:"py-2",children:a.name},a.id))]})}),(0,b.jsx)(l,{label:"Category Type",required:!0,children:(0,b.jsxs)("select",{className:"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200",value:n.categoryTypeId,onChange:a=>x("categoryTypeId",a.target.value),children:[(0,b.jsx)("option",{value:"",className:"text-gray-400",children:"Select Category Type"}),t.map(a=>(0,b.jsx)("option",{value:a.id,className:"py-2",children:a.name},a.id))]})})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(l,{label:"Branch",required:!0,children:(0,b.jsxs)("select",{className:"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200",value:n.branchId,onChange:a=>x("branchId",a.target.value),children:[(0,b.jsx)("option",{value:"",className:"text-gray-400",children:"Select Branch"}),v.map(a=>(0,b.jsx)("option",{value:a.id,className:"py-2",children:a.branchName},a.id))]})}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,b.jsx)(l,{label:"Unit",children:(0,b.jsxs)("select",{className:"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200",value:n.unit,onChange:a=>x("unit",a.target.value),children:[(0,b.jsx)("option",{value:"",className:"text-gray-400",children:"Select Unit"}),(0,b.jsx)("option",{value:"kg",className:"py-2",children:"Kg"}),(0,b.jsx)("option",{value:"bag",className:"py-2",children:"Bag"}),(0,b.jsx)("option",{value:"box",className:"py-2",children:"Box"})]})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)(l,{label:"Cost Price",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"$"}),(0,b.jsx)(e.default,{type:"number",value:n.costPrice,onChange:a=>x("costPrice",a.target.value),placeholder:"0.00",min:"0",className:"pl-8 w-full"})]})}),(0,b.jsx)(l,{label:"Wholesale Price",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"$"}),(0,b.jsx)(e.default,{type:"number",value:n.wholesalePrice,onChange:a=>x("wholesalePrice",a.target.value),placeholder:"0.00",min:"0",className:"pl-8 w-full"})]})}),(0,b.jsx)(l,{label:"Sell Price",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400",children:"$"}),(0,b.jsx)(e.default,{type:"number",value:n.sellPrice,onChange:a=>x("sellPrice",a.target.value),placeholder:"0.00",min:"0",className:"pl-8 w-full"})]})})]}),(0,b.jsx)(l,{label:"Description",children:(0,b.jsx)("textarea",{value:n.description,onChange:a=>x("description",a.target.value),placeholder:"Enter product description (optional)",rows:3,className:"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none transition-all duration-200"})})]})]})}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Fields marked with ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})," are required"]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d.default,{variant:"outline",onClick:k,className:"px-6 py-2.5 border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200",children:"Cancel"}),(0,b.jsx)(d.default,{onClick:y,disabled:p,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"add"===f?"Add Product":"Update Product"]})})]})]})})]})}):null}function l({label:a,children:c,required:d,className:e=""}){return(0,b.jsxs)("div",{className:`space-y-2 ${e}`,children:[(0,b.jsxs)(i.default,{className:"flex items-center gap-1 text-sm font-medium text-gray-700 dark:text-gray-300",children:[a,d&&(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),c]})}function m({openUp:a,onEdit:d,onDelete:e}){let[f,g]=(0,c.useState)(!1),h=(0,c.useRef)(null);return(0,c.useEffect)(()=>{function a(a){h.current&&!h.current.contains(a.target)&&g(!1)}return f&&document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[f]),(0,b.jsxs)("div",{ref:h,className:"relative",children:[(0,b.jsx)("button",{onClick:()=>g(a=>!a),className:"rounded-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700",children:"â‹®"}),f&&(0,b.jsxs)("div",{className:`absolute right-0 z-50 w-36 rounded-lg border bg-white shadow-lg
          dark:border-gray-700 dark:bg-gray-900
          ${a?"bottom-full mb-2":"top-full mt-2"}`,children:[(0,b.jsx)("button",{onClick:()=>{d(),g(!1)},className:"flex w-full gap-2 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800",children:"âœï¸ Edit"}),(0,b.jsx)("button",{onClick:()=>{e(),g(!1)},className:"flex w-full gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"ðŸ—‘ Delete"})]})]})}function n(){let[a,i]=(0,c.useState)([]),[j,l]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)("add"),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1);async function z(){y(!0);try{let a=await g.CompanyService.getAllProducts();i(a.data.data.items||[])}catch{h.default.error("Failed to load products"),i([])}finally{y(!1)}}async function A(a){try{if("add"===p)await g.CompanyService.CreateProductAsync?.(a),h.default.success("Product created successfully");else if(!r?.id)return void h.default.error("Product ID missing");o(!1),z()}catch{h.default.error("Operation failed")}}async function B(){if(r)try{w(!0),u(!1),z()}catch{h.default.error("Failed to delete product")}finally{w(!1)}}(0,c.useEffect)(()=>{z()},[]);let C=a.filter(a=>a.name.toLowerCase().includes(j.toLowerCase()));return(0,b.jsxs)("div",{className:"w-full rounded-xl bg-white px-6 pb-6 dark:bg-gray-900",children:[(0,b.jsx)("h2",{className:"mb-4 text-xl font-semibold text-gray-800 dark:text-white",children:"Products"}),(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)(e.default,{placeholder:"Search products...",value:j,onChange:a=>l(a.target.value),className:"w-64"}),(0,b.jsx)(d.default,{size:"sm",onClick:()=>{q("add"),s(null),o(!0)},children:"+ Add Product"})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,b.jsxs)("tr",{className:"text-left text-sm text-gray-600 dark:text-gray-300",children:[(0,b.jsx)("th",{className:"px-3 py-3",children:"Name"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Category"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Type"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Unit"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Cost"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"selling"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Wholesale"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Qty"}),(0,b.jsx)("th",{className:"px-3 py-3",children:"Created At"}),(0,b.jsx)("th",{className:"px-3 py-3 text-right",children:"Action"})]})}),(0,b.jsx)("tbody",{children:x?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"py-6 text-center text-sm",children:"Loading products..."})}):C.map((a,c)=>(0,b.jsxs)("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:[(0,b.jsx)("td",{className:"px-3 text-sm",children:a.name}),(0,b.jsx)("td",{className:"px-3 text-sm",children:a.categoryName}),(0,b.jsx)("td",{className:"px-3 text-sm",children:a.categoryTypeName}),(0,b.jsx)("td",{className:"px-3 text-sm",children:a.unit}),(0,b.jsxs)("td",{className:"px-3 text-sm text-red-500",children:["$",a.costPrice]}),(0,b.jsxs)("td",{className:"px-3 text-green-600",children:["$",a.sellPrice]}),(0,b.jsxs)("td",{className:"px-3 text-blue-600",children:["$",a.wholesalePrice]}),(0,b.jsx)("td",{className:`px-3 text-sm font-medium ${10>parseInt(a.quantity,10)?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:a.quantity}),(0,b.jsx)("td",{className:"px-3 text-sm",children:new Date(a.createdAt).toISOString().split("T")[0]}),(0,b.jsx)("td",{className:"px-3 text-right",children:(0,b.jsx)(m,{openUp:c===C.length-1,onEdit:()=>{q("edit"),s(a),o(!0)},onDelete:()=>{s(a),u(!0)}})})]},a.id))})]})}),(0,b.jsx)(k,{open:n,mode:p,initialData:r?{name:r.name,description:r.description,categoryId:r.categoryId,categoryTypeId:r.categoryTypeId,branchId:r.branchId,quantity:r.quantity,unit:r.unit,costPrice:r.costPrice,wholesalePrice:r.wholesalePrice,minStockLevel:r.minStockLevel,sellPrice:r.sellPrice}:void 0,onClose:()=>o(!1),onSubmit:A}),(0,b.jsx)(f.default,{open:t,loading:v,onClose:()=>u(!1),onConfirm:B})]})}a.s(["default",()=>n],53727)}];

//# sourceMappingURL=src_components_Company_ProductTable_tsx_ed64e97b._.js.map