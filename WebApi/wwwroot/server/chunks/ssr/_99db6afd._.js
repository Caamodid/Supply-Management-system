module.exports=[74174,(a,b,c)=>{var d;"undefined"!=typeof self?self:a.e,d=a.r(72131),b.exports=function(){"use strict";var a={155:function(a){a.exports=d}},b={};function c(d){var e=b[d];if(void 0!==e)return e.exports;var f=b[d]={exports:{}};return a[d](f,f.exports,c),f.exports}c.d=function(a,b){for(var d in b)c.o(b,d)&&!c.o(a,d)&&Object.defineProperty(a,d,{enumerable:!0,get:b[d]})},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var e={};c.r(e),c.d(e,{useReactToPrint:function(){return m}});var f=c(155);let g="printWindow";function h({level:a="error",messages:b,suppressErrors:c=!1}){c||("error"===a?console.error(b):"warning"===a?console.warn(b):console.debug(b))}function i(a,b){if(b||!a){let a=document.getElementById(g);a&&document.body.removeChild(a)}}function j(a){return a instanceof Error?a:Error("Unknown Error")}function k(a,b){let{documentTitle:c,onAfterPrint:d,onPrintError:e,preserveAfterPrint:f,print:g,suppressErrors:k}=b;setTimeout(()=>{var b,l;if(a.contentWindow){function m(){null==d||d(),i(f)}if(a.contentWindow.focus(),g)g(a).then(m).catch(a=>{e?e("print",j(a)):h({messages:["An error was thrown by the specified `print` function"],suppressErrors:k})});else{if(a.contentWindow.print){let d=null!=(l=null==(b=a.contentDocument)?void 0:b.title)?l:"",e=a.ownerDocument.title;c&&(a.ownerDocument.title=c,a.contentDocument&&(a.contentDocument.title=c)),a.contentWindow.print(),c&&(a.ownerDocument.title=e,a.contentDocument&&(a.contentDocument.title=d))}else h({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:k});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(a=>{var b,c;return(null!=(c=null!=(b=navigator.userAgent)?b:navigator.vendor)?c:"opera"in window&&window.opera).match(a)})?setTimeout(m,500):m()}}else h({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:k})},500)}function l(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,null),d=c.nextNode();for(;d;)b.push(d),d=c.nextNode();return b}function m({bodyClass:a,contentRef:b,copyShadowRoots:c,documentTitle:d,fonts:e,ignoreGlobalStyles:m,nonce:n,onAfterPrint:o,onBeforePrint:p,onPrintError:q,pageStyle:r,preserveAfterPrint:s,print:t,printIframeProps:u,suppressErrors:v}){return(0,f.useCallback)(f=>{function w(){let i,w={bodyClass:a,contentRef:b,copyShadowRoots:c,documentTitle:d,fonts:e,ignoreGlobalStyles:m,nonce:n,onAfterPrint:o,onBeforePrint:p,onPrintError:q,pageStyle:r,preserveAfterPrint:s,print:t,printIframeProps:u,suppressErrors:v},x=((i=document.createElement("iframe")).width=`${document.documentElement.clientWidth}px`,i.height=`${document.documentElement.clientHeight}px`,i.style.position="absolute",i.style.top=`-${document.documentElement.clientHeight+100}px`,i.style.left=`-${document.documentElement.clientWidth+100}px`,i.id=g,i.srcdoc="<!DOCTYPE html>",u&&(u.allow&&(i.allow=u.allow),void 0!==u.referrerPolicy&&(i.referrerPolicy=u.referrerPolicy),void 0!==u.sandbox&&(i.sandbox=u.sandbox)),i),y=function(a,b){let{contentRef:c,fonts:d,ignoreGlobalStyles:e,suppressErrors:f}=b,g=function({contentRef:a,optionalContent:b,suppressErrors:c}){return b&&"function"==typeof b?(a&&h({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),b()):a?a.current:void h({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:c})}({contentRef:c,optionalContent:a,suppressErrors:f});if(!g)return;let i=g.cloneNode(!0),j=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),k=i.querySelectorAll("img"),l=i.querySelectorAll("video"),m=d?d.length:0;return{contentNode:g,clonedContentNode:i,clonedImgNodes:k,clonedVideoNodes:l,numResourcesToLoad:(e?0:j.length)+k.length+l.length+m,originalCanvasNodes:g.querySelectorAll("canvas")}}(f,w);if(!y)return void h({messages:["There is nothing to print"],suppressErrors:v});let z=function(a,b,c){let{suppressErrors:d}=a,e=[],f=[];return function(g,i){e.includes(g)?h({level:"debug",messages:["Tried to mark a resource that has already been handled",g],suppressErrors:d}):(i?(h({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...i],suppressErrors:d}),f.push(g)):e.push(g),e.length+f.length===b&&k(c,a))}}(w,y.numResourcesToLoad,x);x.onload=()=>{!function(a,b,c,d){var e,f,g,i,m;let{contentNode:n,clonedContentNode:o,clonedImgNodes:p,clonedVideoNodes:q,numResourcesToLoad:r,originalCanvasNodes:s}=c,{bodyClass:t,fonts:u,ignoreGlobalStyles:v,pageStyle:w,nonce:x,suppressErrors:y,copyShadowRoots:z}=d;a.onload=null;let A=null!=(e=a.contentDocument)?e:null==(f=a.contentWindow)?void 0:f.document;if(A){let c=A.body.appendChild(o);z&&function a(b,c,d){let e=l(b),f=l(c);if(e.length===f.length)for(let b=0;b<e.length;b++){let c=e[b],g=f[b],h=c.shadowRoot;if(null!==h){let b=g.attachShadow({mode:h.mode});b.innerHTML=h.innerHTML,a(h,b,d)}}else h({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",b,c],suppressErrors:d})}(n,c,!!y),u&&((null==(g=a.contentDocument)?void 0:g.fonts)&&(null==(i=a.contentWindow)?void 0:i.FontFace)?u.forEach(c=>{let d=new FontFace(c.family,c.source,{weight:c.weight,style:c.style});a.contentDocument.fonts.add(d),d.loaded.then(()=>{b(d)}).catch(a=>{b(d,["Failed loading the font:",d,"Load error:",j(a)])})}):(u.forEach(a=>{b(a)}),h({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:y})));let d=A.createElement("style");x&&(d.setAttribute("nonce",x),A.head.setAttribute("nonce",x)),d.appendChild(A.createTextNode(null!=w?w:'\n    @page {\n        /* Remove browser default header (title) and footer (url) */\n        margin: 0;\n    }\n    @media print {\n        body {\n            /* Tell browsers to print background colors */\n            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */\n            print-color-adjust: exact; /* Firefox/Safari */\n            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n        }\n    }\n')),A.head.appendChild(d),t&&A.body.classList.add(...t.split(" "));let e=A.querySelectorAll("canvas");for(let a=0;a<s.length;++a){let b=s[a],c=e[a];if(void 0===c){h({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",b],suppressErrors:y});continue}let d=c.getContext("2d");d&&d.drawImage(b,0,0)}for(let a=0;a<p.length;a++){let c=p[a],d=c.getAttribute("src");if(d){let a=new Image;a.onload=()=>{b(c)},a.onerror=(a,d,e,f,g)=>{b(c,["Error loading <img>",c,"Error",g])},a.src=d}else b(c,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',c])}for(let a=0;a<q.length;a++){let c=q[a];c.preload="auto";let d=c.getAttribute("poster");if(d){let a=new Image;a.onload=()=>{b(c)},a.onerror=(a,e,f,g,h)=>{b(c,["Error loading video poster",d,"for video",c,"Error:",h])},a.src=d}else c.readyState>=2?b(c):c.src?(c.onloadeddata=()=>{b(c)},c.onerror=(a,d,e,f,g)=>{b(c,["Error loading video",c,"Error",g])},c.onstalled=()=>{b(c,["Loading video stalled, skipping",c])}):b(c,["Error loading video, `src` is empty",c])}let f="select",k=n.querySelectorAll(f),r=A.querySelectorAll(f);for(let a=0;a<k.length;a++)r[a].value=k[a].value;if(!v){let a=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let c=0,d=a.length;c<d;++c){let d=a[c];if("style"===d.tagName.toLowerCase()){let a=A.createElement(d.tagName),b=d.sheet;if(b){let e="";try{let a=b.cssRules.length;for(let c=0;c<a;++c)"string"==typeof b.cssRules[c].cssText&&(e+=`${b.cssRules[c].cssText}\r
`)}catch(a){h({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",d,`Original error: ${j(a).message}`],level:"warning"})}a.setAttribute("id",`react-to-print-${c}`),x&&a.setAttribute("nonce",x),a.appendChild(A.createTextNode(e)),A.head.appendChild(a)}}else if(d.getAttribute("href"))if(d.hasAttribute("disabled"))h({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",d],level:"warning"}),b(d);else{let a=A.createElement(d.tagName);for(let b=0,c=d.attributes.length;b<c;++b){let c=d.attributes[b];c&&a.setAttribute(c.nodeName,null!=(m=c.nodeValue)?m:"")}a.onload=()=>{b(a)},a.onerror=(c,d,e,f,g)=>{b(a,["Failed to load",a,"Error:",g])},x&&a.setAttribute("nonce",x),A.head.appendChild(a)}else h({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",d],level:"warning"}),b(d)}}}0===r&&k(a,d)}(x,z,y,w)},document.body.appendChild(x)}i(s,!0),p?p().then(()=>{w()}).catch(a=>{null==q||q("onBeforePrint",j(a))}):w()},[a,b,c,d,e,m,n,o,p,q,r,s,t,v])}return e}()},35061,a=>{"use strict";let b;var c,d,e=a.i(87924),f=a.i(72131),g=a.i(50944),h=a.i(44668);function i({open:a,saleId:b,discount:c,remark:d,items:g,loading:h,onClose:i,onSubmit:j}){let[k,l]=(0,f.useState)(c),[m,n]=(0,f.useState)(d??""),[o,p]=(0,f.useState)(g);if(!a)return null;function q(a,b,c){let d=[...o];d[a]={...d[a],[b]:c},p(d)}return(0,e.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-3xl p-6",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Edit Sale"}),(0,e.jsxs)("table",{className:"w-full mb-4",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{className:"border-b",children:[(0,e.jsx)("th",{className:"text-left py-2",children:"Product"}),(0,e.jsx)("th",{className:"text-right",children:"Qty"}),(0,e.jsx)("th",{className:"text-right",children:"Unit Price"}),(0,e.jsx)("th",{className:"text-right",children:"Total"})]})}),(0,e.jsx)("tbody",{children:o.map((a,b)=>(0,e.jsxs)("tr",{className:"border-b",children:[(0,e.jsx)("td",{className:"py-2",children:a.productName}),(0,e.jsx)("td",{className:"text-right",children:(0,e.jsx)("input",{type:"number",className:"w-20 border rounded px-2 py-1",value:a.quantity,onChange:a=>q(b,"quantity",Number(a.target.value))})}),(0,e.jsx)("td",{className:"text-right",children:(0,e.jsx)("input",{type:"number",className:"w-24 border rounded px-2 py-1",value:a.unitPrice,onChange:a=>q(b,"unitPrice",Number(a.target.value))})}),(0,e.jsx)("td",{className:"text-right font-medium",children:a.quantity*a.unitPrice})]},b))})]}),(0,e.jsxs)("div",{className:"mb-3",children:[(0,e.jsx)("label",{className:"text-sm text-gray-600",children:"Discount"}),(0,e.jsx)("input",{type:"number",value:k,onChange:a=>l(Number(a.target.value)),className:"w-full border rounded px-3 py-2"})]}),(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)("label",{className:"text-sm text-gray-600",children:"Remark"}),(0,e.jsx)("textarea",{value:m,onChange:a=>n(a.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,e.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,e.jsx)("button",{onClick:i,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,e.jsx)("button",{disabled:h,onClick:function(){j({saleId:b,discount:k,remark:m,items:o.map(a=>({productId:a.productId,quantity:a.quantity,unitPrice:a.unitPrice,lineTotal:a.quantity*a.unitPrice}))})},className:"px-4 py-2 bg-blue-600 text-white rounded",children:h?"Saving...":"Save Changes"})]})]})})}var j=a.i(6704);let k=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)},l=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var m={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,f.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:e="",children:g,iconNode:h,...i},j)=>(0,f.createElement)("svg",{ref:j,...m,width:b,height:b,stroke:a,strokeWidth:d?24*Number(c)/Number(b):c,className:l("lucide",e),...!g&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0})(i)&&{"aria-hidden":"true"},...i},[...h.map(([a,b])=>(0,f.createElement)(a,b)),...Array.isArray(g)?g:[g]])),o=(c="arrow-left",d=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],(b=(0,f.forwardRef)(({className:a,...b},e)=>(0,f.createElement)(n,{ref:e,iconNode:d,className:l(`lucide-${k(c).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${c}`,a),...b}))).displayName=k(c),b);var p=a.i(74174);function q({isOpen:a,onClose:b,onConfirm:c,isLoading:d}){let[g,h]=(0,f.useState)("Customer requested cancellation");return a?(0,e.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center print:hidden",children:(0,e.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Cancel Sale"}),(0,e.jsx)("textarea",{className:"w-full border rounded p-2 mb-4",value:g,onChange:a=>h(a.target.value)}),(0,e.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,e.jsx)("button",{onClick:b,className:"px-4 py-2 border rounded",children:"Close"}),(0,e.jsx)("button",{disabled:d,onClick:()=>c(g),className:"px-4 py-2 bg-red-600 text-white rounded",children:d?"Cancelling...":"Confirm"})]})]})}):null}function r(){let{saleId:a}=(0,g.useParams)(),b=(0,g.useRouter)(),[c,d]=(0,f.useState)(null),[k,l]=(0,f.useState)(!1),[m,n]=(0,f.useState)(!1),[r,s]=(0,f.useState)(!1),[t,u]=(0,f.useState)(!1),[v,w]=(0,f.useState)(!1),x=(0,f.useRef)(null);async function y(){try{l(!0);let b=await h.SalesService.getSaleDetail(a);d(b.data.data)}catch{j.default.error("Failed to load sale")}finally{l(!1)}}async function z(a){if(c)try{s(!0),await h.SalesService.cancelSale({saleId:c.saleId,remark:a}),j.default.success("Sale cancelled"),n(!1),y()}catch{j.default.error("Cancel failed")}finally{s(!1)}}async function A(a){try{w(!0),j.default.success("Sale updated"),u(!1),y()}catch{j.default.error("Edit failed")}finally{w(!1)}}if((0,p.useReactToPrint)({documentTitle:`Invoice-${c?.invoiceNumber}`}),(0,f.useEffect)(()=>{a&&y()},[a]),k)return(0,e.jsx)("p",{className:"p-6",children:"Loading..."});if(!c)return(0,e.jsx)("p",{className:"p-6",children:"No sale found"});let B="OPEN"===c.paymentStatus||"PARTIAL"===c.paymentStatus;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(q,{isOpen:m,onClose:()=>n(!1),onConfirm:z,isLoading:r}),(0,e.jsx)(i,{open:t,saleId:c.saleId,discount:c.discount,remark:c.remark,loading:v,items:c.items,onClose:()=>u(!1),onSubmit:A}),(0,e.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,e.jsx)("div",{className:"flex justify-between mb-4 print:hidden",children:(0,e.jsxs)("button",{onClick:()=>b.back(),className:"flex items-center gap-2 text-gray-600",children:[(0,e.jsx)(o,{size:16})," Back"]})}),(0,e.jsxs)("div",{ref:x,children:[(0,e.jsxs)("div",{className:"text-center mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold",children:"Sales Details"}),(0,e.jsxs)("p",{children:["Invoice #",c.invoiceNumber]}),(0,e.jsx)("p",{children:new Date(c.saleDate).toLocaleString()})]}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4 border p-4 mb-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Created User:"})," ",c.createdBy]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Customer:"})," ",c.customerName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Branch:"})," ",c.branchName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Status:"})," ",c.paymentStatus]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Subtotal:"})," ",c.subTotal]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Discount:"})," ",c.discount]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Total:"})," ",c.totalAmount]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Paid:"})," ",c.paidAmount]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("strong",{children:"Balance:"})," ",c.balance]})]})]}),(0,e.jsxs)("table",{className:"w-full border",children:[(0,e.jsx)("thead",{className:"bg-gray-100",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{className:"p-2 text-left",children:"Product"}),(0,e.jsx)("th",{className:"p-2 text-right",children:"Qty"}),(0,e.jsx)("th",{className:"p-2 text-right",children:"Price"}),(0,e.jsx)("th",{className:"p-2 text-right",children:"Total"})]})}),(0,e.jsx)("tbody",{children:c.items.map((a,b)=>(0,e.jsxs)("tr",{className:"border-t",children:[(0,e.jsx)("td",{className:"p-2",children:a.productName}),(0,e.jsx)("td",{className:"p-2 text-right",children:a.quantity}),(0,e.jsx)("td",{className:"p-2 text-right",children:a.unitPrice}),(0,e.jsx)("td",{className:"p-2 text-right",children:a.lineTotal})]},b))})]})]}),(0,e.jsxs)("div",{className:"flex gap-3 mt-4 print:hidden",children:[(0,e.jsx)("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Edit Sale"}),B&&(0,e.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 bg-red-600 text-white rounded",children:"Cancel Sale"})]})]})]})}a.s(["default",()=>r],35061)}];

//# sourceMappingURL=_99db6afd._.js.map