(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18984,e=>{"use strict";var t=e.i(16973);e.s(["SalesService",0,{getAllStocks:()=>t.default.get("/Product/stock-list"),getproduct:()=>t.default.get("/Product/products"),CreateStockAsync:e=>t.default.post("/Product/create-ReceiveStockAsync",e),CreateStockTransfrerAsyn:e=>t.default.post("/Product/create-StockTransfer",e),CreateCustomerAsyn:e=>t.default.post("/Customer/create-customer",e),getAllCustomers:()=>t.default.get("/Customer/customer-lists"),getSaleDetail:e=>t.default.post(`/Customer/SaleDetail/${e}`),cancelSale:e=>t.default.post("/Customer/cancel-sale",e),getAllSales:()=>t.default.post("/Customer/sales-lists"),updateCustomer:(e,r)=>t.default.put(`/Customer/edit-customer/${e}`,r),deleteCustomer:e=>t.default.delete(`/Customer/delete-customer/${e}`)}])},20684,(e,t,r)=>{var n;"undefined"!=typeof self?self:e.e,n=e.r(71645),t.exports=function(){"use strict";var e={155:function(e){e.exports=n}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};r.r(s),r.d(s,{useReactToPrint:function(){return h}});var o=r(155);let l="printWindow";function a({level:e="error",messages:t,suppressErrors:r=!1}){r||("error"===e?console.error(t):"warning"===e?console.warn(t):console.debug(t))}function i(e,t){if(t||!e){let e=document.getElementById(l);e&&document.body.removeChild(e)}}function c(e){return e instanceof Error?e:Error("Unknown Error")}function d(e,t){let{documentTitle:r,onAfterPrint:n,onPrintError:s,preserveAfterPrint:o,print:l,suppressErrors:d}=t;setTimeout(()=>{var t,u;if(e.contentWindow){function h(){null==n||n(),i(o)}if(e.contentWindow.focus(),l)l(e).then(h).catch(e=>{s?s("print",c(e)):a({messages:["An error was thrown by the specified `print` function"],suppressErrors:d})});else{if(e.contentWindow.print){let n=null!=(u=null==(t=e.contentDocument)?void 0:t.title)?u:"",s=e.ownerDocument.title;r&&(e.ownerDocument.title=r,e.contentDocument&&(e.contentDocument.title=r)),e.contentWindow.print(),r&&(e.ownerDocument.title=s,e.contentDocument&&(e.contentDocument.title=n))}else a({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:d});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(e=>{var t,r;return(null!=(r=null!=(t=navigator.userAgent)?t:navigator.vendor)?r:"opera"in window&&window.opera).match(e)})?setTimeout(h,500):h()}}else a({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:d})},500)}function u(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null),n=r.nextNode();for(;n;)t.push(n),n=r.nextNode();return t}function h({bodyClass:e,contentRef:t,copyShadowRoots:r,documentTitle:n,fonts:s,ignoreGlobalStyles:h,nonce:p,onAfterPrint:m,onBeforePrint:f,onPrintError:g,pageStyle:x,preserveAfterPrint:b,print:y,printIframeProps:v,suppressErrors:w}){return(0,o.useCallback)(o=>{function j(){let i,j={bodyClass:e,contentRef:t,copyShadowRoots:r,documentTitle:n,fonts:s,ignoreGlobalStyles:h,nonce:p,onAfterPrint:m,onBeforePrint:f,onPrintError:g,pageStyle:x,preserveAfterPrint:b,print:y,printIframeProps:v,suppressErrors:w},N=((i=document.createElement("iframe")).width=`${document.documentElement.clientWidth}px`,i.height=`${document.documentElement.clientHeight}px`,i.style.position="absolute",i.style.top=`-${document.documentElement.clientHeight+100}px`,i.style.left=`-${document.documentElement.clientWidth+100}px`,i.id=l,i.srcdoc="<!DOCTYPE html>",v&&(v.allow&&(i.allow=v.allow),void 0!==v.referrerPolicy&&(i.referrerPolicy=v.referrerPolicy),void 0!==v.sandbox&&(i.sandbox=v.sandbox)),i),S=function(e,t){let{contentRef:r,fonts:n,ignoreGlobalStyles:s,suppressErrors:o}=t,l=function({contentRef:e,optionalContent:t,suppressErrors:r}){return t&&"function"==typeof t?(e&&a({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),t()):e?e.current:void a({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:r})}({contentRef:r,optionalContent:e,suppressErrors:o});if(!l)return;let i=l.cloneNode(!0),c=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),d=i.querySelectorAll("img"),u=i.querySelectorAll("video"),h=n?n.length:0;return{contentNode:l,clonedContentNode:i,clonedImgNodes:d,clonedVideoNodes:u,numResourcesToLoad:(s?0:c.length)+d.length+u.length+h,originalCanvasNodes:l.querySelectorAll("canvas")}}(o,j);if(!S)return void a({messages:["There is nothing to print"],suppressErrors:w});let C=function(e,t,r){let{suppressErrors:n}=e,s=[],o=[];return function(l,i){s.includes(l)?a({level:"debug",messages:["Tried to mark a resource that has already been handled",l],suppressErrors:n}):(i?(a({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...i],suppressErrors:n}),o.push(l)):s.push(l),s.length+o.length===t&&d(r,e))}}(j,S.numResourcesToLoad,N);N.onload=()=>{!function(e,t,r,n){var s,o,l,i,h;let{contentNode:p,clonedContentNode:m,clonedImgNodes:f,clonedVideoNodes:g,numResourcesToLoad:x,originalCanvasNodes:b}=r,{bodyClass:y,fonts:v,ignoreGlobalStyles:w,pageStyle:j,nonce:N,suppressErrors:S,copyShadowRoots:C}=n;e.onload=null;let E=null!=(s=e.contentDocument)?s:null==(o=e.contentWindow)?void 0:o.document;if(E){let r=E.body.appendChild(m);C&&function e(t,r,n){let s=u(t),o=u(r);if(s.length===o.length)for(let t=0;t<s.length;t++){let r=s[t],l=o[t],a=r.shadowRoot;if(null!==a){let t=l.attachShadow({mode:a.mode});t.innerHTML=a.innerHTML,e(a,t,n)}}else a({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",t,r],suppressErrors:n})}(p,r,!!S),v&&((null==(l=e.contentDocument)?void 0:l.fonts)&&(null==(i=e.contentWindow)?void 0:i.FontFace)?v.forEach(r=>{let n=new FontFace(r.family,r.source,{weight:r.weight,style:r.style});e.contentDocument.fonts.add(n),n.loaded.then(()=>{t(n)}).catch(e=>{t(n,["Failed loading the font:",n,"Load error:",c(e)])})}):(v.forEach(e=>{t(e)}),a({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:S})));let n=E.createElement("style");N&&(n.setAttribute("nonce",N),E.head.setAttribute("nonce",N)),n.appendChild(E.createTextNode(null!=j?j:'\n    @page {\n        /* Remove browser default header (title) and footer (url) */\n        margin: 0;\n    }\n    @media print {\n        body {\n            /* Tell browsers to print background colors */\n            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */\n            print-color-adjust: exact; /* Firefox/Safari */\n            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */\n        }\n    }\n')),E.head.appendChild(n),y&&E.body.classList.add(...y.split(" "));let s=E.querySelectorAll("canvas");for(let e=0;e<b.length;++e){let t=b[e],r=s[e];if(void 0===r){a({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",t],suppressErrors:S});continue}let n=r.getContext("2d");n&&n.drawImage(t,0,0)}for(let e=0;e<f.length;e++){let r=f[e],n=r.getAttribute("src");if(n){let e=new Image;e.onload=()=>{t(r)},e.onerror=(e,n,s,o,l)=>{t(r,["Error loading <img>",r,"Error",l])},e.src=n}else t(r,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',r])}for(let e=0;e<g.length;e++){let r=g[e];r.preload="auto";let n=r.getAttribute("poster");if(n){let e=new Image;e.onload=()=>{t(r)},e.onerror=(e,s,o,l,a)=>{t(r,["Error loading video poster",n,"for video",r,"Error:",a])},e.src=n}else r.readyState>=2?t(r):r.src?(r.onloadeddata=()=>{t(r)},r.onerror=(e,n,s,o,l)=>{t(r,["Error loading video",r,"Error",l])},r.onstalled=()=>{t(r,["Loading video stalled, skipping",r])}):t(r,["Error loading video, `src` is empty",r])}let o="select",d=p.querySelectorAll(o),x=E.querySelectorAll(o);for(let e=0;e<d.length;e++)x[e].value=d[e].value;if(!w){let e=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let r=0,n=e.length;r<n;++r){let n=e[r];if("style"===n.tagName.toLowerCase()){let e=E.createElement(n.tagName),t=n.sheet;if(t){let s="";try{let e=t.cssRules.length;for(let r=0;r<e;++r)"string"==typeof t.cssRules[r].cssText&&(s+=`${t.cssRules[r].cssText}\r
`)}catch(e){a({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",n,`Original error: ${c(e).message}`],level:"warning"})}e.setAttribute("id",`react-to-print-${r}`),N&&e.setAttribute("nonce",N),e.appendChild(E.createTextNode(s)),E.head.appendChild(e)}}else if(n.getAttribute("href"))if(n.hasAttribute("disabled"))a({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",n],level:"warning"}),t(n);else{let e=E.createElement(n.tagName);for(let t=0,r=n.attributes.length;t<r;++t){let r=n.attributes[t];r&&e.setAttribute(r.nodeName,null!=(h=r.nodeValue)?h:"")}e.onload=()=>{t(e)},e.onerror=(r,n,s,o,l)=>{t(e,["Failed to load",e,"Error:",l])},N&&e.setAttribute("nonce",N),E.head.appendChild(e)}else a({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",n],level:"warning"}),t(n)}}}0===x&&d(e,n)}(N,C,S,j)},document.body.appendChild(N)}i(b,!0),f?f().then(()=>{j()}).catch(e=>{null==g||g("onBeforePrint",c(e))}):j()},[e,t,r,n,s,h,p,m,f,g,x,b,y,w])}return s}()},12111,e=>{"use strict";let t;var r,n,s=e.i(43476),o=e.i(71645),l=e.i(18566),a=e.i(18984);function i({open:e,saleId:t,discount:r,remark:n,items:l,loading:a,onClose:i,onSubmit:c}){let[d,u]=(0,o.useState)(r),[h,p]=(0,o.useState)(n??""),[m,f]=(0,o.useState)(l);if(!e)return null;function g(e,t,r){let n=[...m];n[e]={...n[e],[t]:r},f(n)}return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl w-full max-w-3xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Edit Sale"}),(0,s.jsxs)("table",{className:"w-full mb-4",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left py-2",children:"Product"}),(0,s.jsx)("th",{className:"text-right",children:"Qty"}),(0,s.jsx)("th",{className:"text-right",children:"Unit Price"}),(0,s.jsx)("th",{className:"text-right",children:"Total"})]})}),(0,s.jsx)("tbody",{children:m.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"py-2",children:e.productName}),(0,s.jsx)("td",{className:"text-right",children:(0,s.jsx)("input",{type:"number",className:"w-20 border rounded px-2 py-1",value:e.quantity,onChange:e=>g(t,"quantity",Number(e.target.value))})}),(0,s.jsx)("td",{className:"text-right",children:(0,s.jsx)("input",{type:"number",className:"w-24 border rounded px-2 py-1",value:e.unitPrice,onChange:e=>g(t,"unitPrice",Number(e.target.value))})}),(0,s.jsx)("td",{className:"text-right font-medium",children:e.quantity*e.unitPrice})]},t))})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"Discount"}),(0,s.jsx)("input",{type:"number",value:d,onChange:e=>u(Number(e.target.value)),className:"w-full border rounded px-3 py-2"})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"Remark"}),(0,s.jsx)("textarea",{value:h,onChange:e=>p(e.target.value),className:"w-full border rounded px-3 py-2"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:i,className:"px-4 py-2 border rounded",children:"Cancel"}),(0,s.jsx)("button",{disabled:a,onClick:function(){c({saleId:t,discount:d,remark:h,items:m.map(e=>({productId:e.productId,quantity:e.quantity,unitPrice:e.unitPrice,lineTotal:e.quantity*e.unitPrice}))})},className:"px-4 py-2 bg-blue-600 text-white rounded",children:a?"Saving...":"Save Changes"})]})]})})}var c=e.i(5766);let d=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},u=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let p=(0,o.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:l,iconNode:a,...i},c)=>(0,o.createElement)("svg",{ref:c,...h,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:u("lucide",s),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(i)&&{"aria-hidden":"true"},...i},[...a.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(l)?l:[l]])),m=(r="arrow-left",n=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],(t=(0,o.forwardRef)(({className:e,...t},s)=>(0,o.createElement)(p,{ref:s,iconNode:n,className:u(`lucide-${d(r).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${r}`,e),...t}))).displayName=d(r),t);var f=e.i(20684);function g({isOpen:e,onClose:t,onConfirm:r,isLoading:n}){let[l,a]=(0,o.useState)("Customer requested cancellation");return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center print:hidden",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Cancel Sale"}),(0,s.jsx)("textarea",{className:"w-full border rounded p-2 mb-4",value:l,onChange:e=>a(e.target.value)}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 border rounded",children:"Close"}),(0,s.jsx)("button",{disabled:n,onClick:()=>r(l),className:"px-4 py-2 bg-red-600 text-white rounded",children:n?"Cancelling...":"Confirm"})]})]})}):null}function x(){let{saleId:e}=(0,l.useParams)(),t=(0,l.useRouter)(),[r,n]=(0,o.useState)(null),[d,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1),[x,b]=(0,o.useState)(!1),[y,v]=(0,o.useState)(!1),[w,j]=(0,o.useState)(!1),N=(0,o.useRef)(null);async function S(){try{u(!0);let t=await a.SalesService.getSaleDetail(e);n(t.data.data)}catch{c.default.error("Failed to load sale")}finally{u(!1)}}async function C(e){if(r)try{b(!0),await a.SalesService.cancelSale({saleId:r.saleId,remark:e}),c.default.success("Sale cancelled"),p(!1),S()}catch{c.default.error("Cancel failed")}finally{b(!1)}}async function E(e){try{j(!0),c.default.success("Sale updated"),v(!1),S()}catch{c.default.error("Edit failed")}finally{j(!1)}}if((0,f.useReactToPrint)({documentTitle:`Invoice-${r?.invoiceNumber}`}),(0,o.useEffect)(()=>{e&&S()},[e]),d)return(0,s.jsx)("p",{className:"p-6",children:"Loading..."});if(!r)return(0,s.jsx)("p",{className:"p-6",children:"No sale found"});let P="OPEN"===r.paymentStatus||"PARTIAL"===r.paymentStatus;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{isOpen:h,onClose:()=>p(!1),onConfirm:C,isLoading:x}),(0,s.jsx)(i,{open:y,saleId:r.saleId,discount:r.discount,remark:r.remark,loading:w,items:r.items,onClose:()=>v(!1),onSubmit:E}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,s.jsx)("div",{className:"flex justify-between mb-4 print:hidden",children:(0,s.jsxs)("button",{onClick:()=>t.back(),className:"flex items-center gap-2 text-gray-600",children:[(0,s.jsx)(m,{size:16})," Back"]})}),(0,s.jsxs)("div",{ref:N,children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Sales Details"}),(0,s.jsxs)("p",{children:["Invoice #",r.invoiceNumber]}),(0,s.jsx)("p",{children:new Date(r.saleDate).toLocaleString()})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 border p-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Created User:"})," ",r.createdBy]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Customer:"})," ",r.customerName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Branch:"})," ",r.branchName]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",r.paymentStatus]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Subtotal:"})," ",r.subTotal]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Discount:"})," ",r.discount]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Total:"})," ",r.totalAmount]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Paid:"})," ",r.paidAmount]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Balance:"})," ",r.balance]})]})]}),(0,s.jsxs)("table",{className:"w-full border",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Product"}),(0,s.jsx)("th",{className:"p-2 text-right",children:"Qty"}),(0,s.jsx)("th",{className:"p-2 text-right",children:"Price"}),(0,s.jsx)("th",{className:"p-2 text-right",children:"Total"})]})}),(0,s.jsx)("tbody",{children:r.items.map((e,t)=>(0,s.jsxs)("tr",{className:"border-t",children:[(0,s.jsx)("td",{className:"p-2",children:e.productName}),(0,s.jsx)("td",{className:"p-2 text-right",children:e.quantity}),(0,s.jsx)("td",{className:"p-2 text-right",children:e.unitPrice}),(0,s.jsx)("td",{className:"p-2 text-right",children:e.lineTotal})]},t))})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-4 print:hidden",children:[(0,s.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Edit Sale"}),P&&(0,s.jsx)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-red-600 text-white rounded",children:"Cancel Sale"})]})]})]})}e.s(["default",()=>x],12111)}]);