(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{4297:(e,l,s)=>{Promise.resolve().then(s.bind(s,9045))},9045:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>x});var a=s(5155),t=s(2115),r=s(8017),d=s(6113),n=s(8747),i=s(4259);function o(e){var l;let{defaultValues:s,onChange:r}=e,[d,n]=(0,t.useState)({userName:(null==s?void 0:s.userName)||"",email:(null==s?void 0:s.email)||"",password:"",phone:(null==s?void 0:s.phone)||"",gender:(null==s?void 0:s.gender)||"",fullName:(null==s?void 0:s.fullName)||"",address:(null==s?void 0:s.address)||"",isactive:null===(l=null==s?void 0:s.isactive)||void 0===l||l}),i=(e,l)=>{let s={...d,[e]:l};n(s),null==r||r(s)};return(0,a.jsx)("form",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Username"}),(0,a.jsx)("input",{value:d.userName,onChange:e=>i("userName",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm",placeholder:"Enter username"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),(0,a.jsx)("input",{value:d.fullName,onChange:e=>i("fullName",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm",placeholder:"Enter full name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",value:d.email,onChange:e=>i("email",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm",placeholder:"Enter email"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Password"}),(0,a.jsx)("input",{type:"password",value:d.password,onChange:e=>i("password",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm",placeholder:"Enter password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),(0,a.jsx)("input",{value:d.phone,onChange:e=>i("phone",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm",placeholder:"Enter phone"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Gender"}),(0,a.jsxs)("select",{value:d.gender,onChange:e=>i("gender",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Select gender"}),(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Address"}),(0,a.jsx)("input",{value:d.address,onChange:e=>i("address",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm",placeholder:"Enter address"})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:d.isactive,onChange:e=>i("isactive",e.target.checked)}),(0,a.jsx)("label",{className:"text-sm",children:"Active"})]})]})})}var u=s(5316),c=s(872),m=s(5686);function x(){var e,l,s;let[x,p]=(0,t.useState)([]),[g,v]=(0,t.useState)(!0),[h,b]=(0,t.useState)(!1),[f,N]=(0,t.useState)(null),[j,y]=(0,t.useState)(null),[A,w]=(0,t.useState)(null),[k,U]=(0,t.useState)(null),[C,E]=(0,t.useState)(null),[S,P]=(0,t.useState)({page:1,perPage:5,total:0});(0,t.useEffect)(()=>{R()},[]);let R=async()=>{try{v(!0);let e=(await u.g.getAll()).data;e.success&&(p(e.data),P(l=>({...l,total:e.data.length})))}catch(s){var e,l;U((null===(l=s.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)||"Failed to load users"),E("error")}finally{v(!1)}},_=[{key:"email",label:"Email"},{key:"phone",label:"Phone"},{key:"isactive",label:"Status",render:e=>e.isactive?(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Active"}):(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-700",children:"Inactive"})},{key:"role",label:"Role"},{key:"fullName",label:"Name"}],D=async()=>{if(j)try{let e=(f?await u.g.update({userId:f.id,userName:f.userName,...j}):await u.g.create(j)).data;e.success?(U(e.message),E("success"),R(),b(!1),N(null),y(null)):(U(e.message),E("error"))}catch(s){var e,l;U((null===(l=s.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)||"Operation failed"),E("error")}},F=async()=>{if(A){try{let e=(await u.g.delete(A)).data;e.success?(U(e.message),E("success"),R()):(U(e.message),E("error"))}catch(s){var e,l;U((null===(l=s.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)||"Delete failed"),E("error")}w(null)}};(0,t.useEffect)(()=>{if(!k)return;let e=setTimeout(()=>{U(null),E(null)},3e3);return()=>clearTimeout(e)},[k]);let M=x.slice((S.page-1)*S.perPage,S.page*S.perPage);return(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Users"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Dashboard / ",(0,a.jsx)("span",{className:"text-blue-600",children:"Users"})]})]}),k&&(0,a.jsx)("div",{className:"px-4 py-3 rounded-md text-sm ".concat("success"===C?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:k}),(0,a.jsx)(r.A,{columns:_,data:M,loading:g,rightAction:(0,a.jsx)("button",{onClick:()=>{N(null),y(null),b(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md",children:"+ Add User"}),renderActions:e=>(0,a.jsx)(d.A,{actions:[{label:"Edit",icon:(0,a.jsx)(c.A,{size:16}),onClick:()=>{N(e),y(null),b(!0)}},{label:"Delete",icon:(0,a.jsx)(m.A,{size:16}),danger:!0,onClick:()=>w(e.id),attributes:{"data-bs-toggle":"modal","data-bs-target":"#deleteUserModal"}}]}),pagination:S,onPageChange:e=>{P(l=>({...l,page:e}))}}),(0,a.jsx)(n.A,{open:h,title:f?"Edit User":"Add User",confirmText:f?"Update User":"Save User",onClose:()=>{b(!1),N(null),y(null)},onConfirm:D,children:(0,a.jsx)(o,{defaultValues:f?{userName:f.userName,fullName:f.fullName,email:f.email,phone:null!==(e=f.phone)&&void 0!==e?e:"",gender:null!==(l=f.gender)&&void 0!==l?l:"",address:null!==(s=f.address)&&void 0!==s?s:"",isactive:f.isactive}:void 0,onChange:y})}),(0,a.jsx)(i.A,{id:"deleteUserModal",title:"Delete User",message:"Are you sure you want to delete this user?",confirmText:"Delete",onConfirm:F})]})}},5316:(e,l,s)=>{"use strict";s.d(l,{g:()=>t});var a=s(2649);let t={getAll:()=>a.A.get("/User/all"),getById:e=>a.A.get("/User/".concat(e)),create:e=>a.A.post("/User/create",e),createRole:e=>a.A.post("/UserRoles/create-role",e),RoleAll:()=>a.A.get("/UserRoles/all-roles"),updateRole:e=>a.A.put("/UserRoles/update-role",e),update:e=>a.A.put("/User/edit",e),delete:e=>a.A.delete("/User/delete/".concat(e))}}},e=>{var l=l=>e(e.s=l);e.O(0,[651,880,441,517,358],()=>l(4297)),_N_E=e.O()}]);