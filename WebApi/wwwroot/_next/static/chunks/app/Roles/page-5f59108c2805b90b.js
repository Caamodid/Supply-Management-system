(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[404],{7004:(e,l,t)=>{Promise.resolve().then(t.bind(t,1196))},1196:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>g});var a=t(5155),s=t(2115),r=t(8017),o=t(6113),n=t(8747),i=t(4259);function d(e){let{defaultValues:l,onChange:t}=e,[r,o]=(0,s.useState)({roleName:(null==l?void 0:l.roleName)||"",description:(null==l?void 0:l.description)||""}),n=(e,l)=>{let a={...r,[e]:l};o(a),null==t||t(a)};return(0,a.jsx)("form",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Role Name"}),(0,a.jsx)("input",{value:r.roleName,onChange:e=>n("roleName",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter role name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Description"}),(0,a.jsx)("input",{value:r.description,onChange:e=>n("description",e.target.value),className:"w-full rounded-lg border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Enter role description"})]})]})})}var c=t(5316),u=t(872),m=t(5686);function g(){var e;let[l,t]=(0,s.useState)([]),[g,p]=(0,s.useState)(!0),[x,v]=(0,s.useState)(!1),[f,h]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[A,N]=(0,s.useState)(null),[j,R]=(0,s.useState)(null),[C,k]=(0,s.useState)(null),[w,S]=(0,s.useState)({page:1,perPage:5,total:0});(0,s.useEffect)(()=>{U()},[]);let U=async()=>{try{p(!0);let e=(await c.g.RoleAll()).data;e.success&&(t(e.data),S(l=>({...l,total:e.data.length})))}catch(t){var e,l;R((null===(l=t.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)||"Failed to load roles"),k("error")}finally{p(!1)}},E=async()=>{if(b)try{let e=(f?await c.g.updateRole({roleId:f.id,...b}):await c.g.createRole(b)).data;e.success?(R(e.message),k("success"),U(),v(!1),h(null),y(null)):(R(e.message),k("error"))}catch(t){var e,l;R((null===(l=t.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)||"Operation failed"),k("error")}},D=async()=>{if(A){try{let e=(await c.g.delete(A)).data;e.success?(R(e.message),k("success"),U()):(R(e.message),k("error"))}catch(t){var e,l;R((null===(l=t.response)||void 0===l?void 0:null===(e=l.data)||void 0===e?void 0:e.message)||"Delete failed"),k("error")}N(null)}};(0,s.useEffect)(()=>{if(!j)return;let e=setTimeout(()=>{R(null),k(null)},3e3);return()=>clearTimeout(e)},[j]);let _=l.slice((w.page-1)*w.perPage,w.page*w.perPage);return(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Roles"})}),j&&(0,a.jsx)("div",{className:"px-4 py-3 rounded-md text-sm ".concat("success"===C?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:j}),(0,a.jsx)(r.A,{columns:[{key:"name",label:"Role Name"},{key:"description",label:"Description"},{key:"createdAt",label:"CreatedAt"},{key:"createdByUserName",label:"Created By"}],data:_,loading:g,rightAction:(0,a.jsx)("button",{onClick:()=>{h(null),y(null),v(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-md",children:"+ Add Role"}),renderActions:e=>(0,a.jsx)(o.A,{actions:[{label:"Edit",icon:(0,a.jsx)(u.A,{size:16}),onClick:()=>{h(e),y(null),v(!0)}},{label:"Delete",icon:(0,a.jsx)(m.A,{size:16}),danger:!0,onClick:()=>N(e.id),attributes:{"data-bs-toggle":"modal","data-bs-target":"#deleteRoleModal"}}]}),pagination:w,onPageChange:e=>{S(l=>({...l,page:e}))}}),(0,a.jsx)(n.A,{open:x,title:f?"Edit Role":"Add Role",confirmText:f?"Update Role":"Save Role",onClose:()=>{v(!1),h(null),y(null)},onConfirm:E,children:(0,a.jsx)(d,{defaultValues:f?{roleName:f.name,description:null!==(e=f.description)&&void 0!==e?e:""}:void 0,onChange:y})}),(0,a.jsx)(i.A,{id:"deleteRoleModal",title:"Delete Role",message:"Are you sure you want to delete this role?",confirmText:"Delete",onConfirm:D})]})}},5316:(e,l,t)=>{"use strict";t.d(l,{g:()=>s});var a=t(2649);let s={getAll:()=>a.A.get("/User/all"),getById:e=>a.A.get("/User/".concat(e)),create:e=>a.A.post("/User/create",e),createRole:e=>a.A.post("/UserRoles/create-role",e),RoleAll:()=>a.A.get("/UserRoles/all-roles"),updateRole:e=>a.A.put("/UserRoles/update-role",e),update:e=>a.A.put("/User/edit",e),delete:e=>a.A.delete("/User/delete/".concat(e))}}},e=>{var l=l=>e(e.s=l);e.O(0,[651,880,441,517,358],()=>l(7004)),_N_E=e.O()}]);