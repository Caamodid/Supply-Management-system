(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{4301:(e,t,s)=>{Promise.resolve().then(s.bind(s,3414))},3414:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(5155),a=s(2115),l=s(2649);let n={login:e=>l.A.post("/User/login",e),logout(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("refresh_token_expiry"),localStorage.removeItem("user_usernameOrEmail"),window.location.href="/"}},o=()=>{let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[o,i]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1),[d,m]=(0,a.useState)(""),g=async t=>{t.preventDefault(),u(!0),m("");try{let t=(await n.login({usernameOrEmail:e,password:s})).data;if(!t.success){m(t.message);return}let r=o?localStorage:sessionStorage;r.setItem("access_token",t.data.token),r.setItem("refresh_token",t.data.refreshToken),r.setItem("refresh_token_expiry",t.data.refreshTokenExpiryDate),r.setItem("user_usernameOrEmail",e),m(t.message),setTimeout(()=>{window.location.href="/"},500)}catch(e){var r,a;m((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Login failed")}finally{u(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-white p-8 rounded-xl shadow-lg",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-2",children:"Sign In"}),(0,r.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Enter your credentials to continue"}),d&&(0,r.jsx)("div",{className:"mb-4 p-3 border rounded bg-blue-50 text-blue-700",children:d}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Email or Username"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Password"}),(0,r.jsx)("input",{type:"password",value:s,onChange:e=>l(e.target.value),required:!0,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:o,onChange:e=>i(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Remember me"]})}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Signing in...":"Sign In"})]})]})})}},2649:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let r=s(2651).A.create({baseURL:"/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),r.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.clear(),window.location.href="/"),Promise.reject(e)});let a=r}},e=>{var t=t=>e(e.s=t);e.O(0,[651,441,517,358],()=>t(4301)),_N_E=e.O()}]);