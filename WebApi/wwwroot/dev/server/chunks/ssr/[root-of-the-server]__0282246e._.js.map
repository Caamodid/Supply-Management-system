{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/components/ui/button/Button.tsx"],"sourcesContent":["import React, { ReactNode } from \"react\";\n\ninterface ButtonProps {\n  children: ReactNode; // Button text or content\n  size?: \"sm\" | \"md\"; // Button size\n  variant?: \"primary\" | \"outline\"; // Button variant\n  startIcon?: ReactNode; // Icon before the text\n  endIcon?: ReactNode; // Icon after the text\n  onClick?: () => void; // Click handler\n  disabled?: boolean; // Disabled state\n  className?: string; // Disabled state\n}\n\nconst Button: React.FC<ButtonProps> = ({\n  children,\n  size = \"md\",\n  variant = \"primary\",\n  startIcon,\n  endIcon,\n  onClick,\n  className = \"\",\n  disabled = false,\n}) => {\n  // Size Classes\n  const sizeClasses = {\n    sm: \"px-4 py-3 text-sm\",\n    md: \"px-5 py-3.5 text-sm\",\n  };\n\n  // Variant Classes\n  const variantClasses = {\n    primary:\n      \"bg-brand-500 text-white shadow-theme-xs hover:bg-brand-600 disabled:bg-brand-300\",\n    outline:\n      \"bg-white text-gray-700 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-400 dark:ring-gray-700 dark:hover:bg-white/[0.03] dark:hover:text-gray-300\",\n  };\n\n  return (\n    <button\n      className={`inline-flex items-center justify-center font-medium gap-2 rounded-lg transition ${className} ${\n        sizeClasses[size]\n      } ${variantClasses[variant]} ${\n        disabled ? \"cursor-not-allowed opacity-50\" : \"\"\n      }`}\n      onClick={onClick}\n      disabled={disabled}\n    >\n      {startIcon && <span className=\"flex items-center\">{startIcon}</span>}\n      {children}\n      {endIcon && <span className=\"flex items-center\">{endIcon}</span>}\n    </button>\n  );\n};\n\nexport default Button;\n"],"names":[],"mappings":";;;;;;AAaA,MAAM,SAAgC,CAAC,EACrC,QAAQ,EACR,OAAO,IAAI,EACX,UAAU,SAAS,EACnB,SAAS,EACT,OAAO,EACP,OAAO,EACP,YAAY,EAAE,EACd,WAAW,KAAK,EACjB;IACC,eAAe;IACf,MAAM,cAAc;QAClB,IAAI;QACJ,IAAI;IACN;IAEA,kBAAkB;IAClB,MAAM,iBAAiB;QACrB,SACE;QACF,SACE;IACJ;IAEA,qBACE,8OAAC;QACC,WAAW,CAAC,gFAAgF,EAAE,UAAU,CAAC,EACvG,WAAW,CAAC,KAAK,CAClB,CAAC,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC,EAC3B,WAAW,kCAAkC,IAC7C;QACF,SAAS;QACT,UAAU;;YAET,2BAAa,8OAAC;gBAAK,WAAU;0BAAqB;;;;;;YAClD;YACA,yBAAW,8OAAC;gBAAK,WAAU;0BAAqB;;;;;;;;;;;;AAGvD;uCAEe"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/components/form/input/InputField.tsx"],"sourcesContent":["import React, { FC } from \"react\";\n\nexport interface InputProps {\n  type?: \"text\" | \"number\" | \"email\" | \"password\" | \"date\" | \"time\" | string;\n  id?: string;\n  name?: string;\n  placeholder?: string;\n\n  /** Controlled input */\n  value?: string | number;\n\n  /** Uncontrolled input */\n  defaultValue?: string | number;\n\n  onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  className?: string;\n  min?: string;\n  max?: string;\n  step?: number;\n  disabled?: boolean;\n\n  /** UI states */\n  success?: boolean;\n  error?: boolean;\n  hint?: string;\n}\n\nconst Input: FC<InputProps> = ({\n  type = \"text\",\n  id,\n  name,\n  placeholder,\n  value,\n  defaultValue,\n  onChange,\n  className = \"\",\n  min,\n  max,\n  step,\n  disabled = false,\n  success = false,\n  error = false,\n  hint,\n}) => {\n  let inputClasses =\n    \"h-11 w-full rounded-lg border px-4 py-2.5 text-sm shadow-theme-xs \" +\n    \"placeholder:text-gray-400 focus:outline-none focus:ring-3 \" +\n    \"dark:bg-gray-900 dark:text-white/90 dark:placeholder:text-white/30 \";\n\n  if (disabled) {\n    inputClasses +=\n      \"border-gray-300 text-gray-500 cursor-not-allowed \" +\n      \"dark:bg-gray-800 dark:text-gray-400 dark:border-gray-700 \";\n  } else if (error) {\n    inputClasses +=\n      \"border-error-500 text-error-800 focus:ring-error-500/10 \" +\n      \"dark:text-error-400 dark:border-error-500 \";\n  } else if (success) {\n    inputClasses +=\n      \"border-success-400 text-success-600 focus:ring-success-500/10 \" +\n      \"dark:text-success-400 dark:border-success-500 \";\n  } else {\n    inputClasses +=\n      \"border-gray-300 text-gray-800 focus:border-brand-300 focus:ring-brand-500/10 \" +\n      \"dark:border-gray-700 dark:bg-gray-900 dark:text-white/90 dark:focus:border-brand-800 \";\n  }\n\n  return (\n    <div className=\"relative\">\n      <input\n        type={type}\n        id={id}\n        name={name}\n        placeholder={placeholder}\n        value={value}\n        defaultValue={defaultValue}\n        onChange={onChange}\n        min={min}\n        max={max}\n        step={step}\n        disabled={disabled}\n        className={`${inputClasses} ${className}`}\n      />\n\n      {hint && (\n        <p\n          className={`mt-1.5 text-xs ${\n            error\n              ? \"text-error-500\"\n              : success\n              ? \"text-success-500\"\n              : \"text-gray-500\"\n          }`}\n        >\n          {hint}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default Input;\n"],"names":[],"mappings":";;;;;;AA2BA,MAAM,QAAwB,CAAC,EAC7B,OAAO,MAAM,EACb,EAAE,EACF,IAAI,EACJ,WAAW,EACX,KAAK,EACL,YAAY,EACZ,QAAQ,EACR,YAAY,EAAE,EACd,GAAG,EACH,GAAG,EACH,IAAI,EACJ,WAAW,KAAK,EAChB,UAAU,KAAK,EACf,QAAQ,KAAK,EACb,IAAI,EACL;IACC,IAAI,eACF,uEACA,+DACA;IAEF,IAAI,UAAU;QACZ,gBACE,sDACA;IACJ,OAAO,IAAI,OAAO;QAChB,gBACE,6DACA;IACJ,OAAO,IAAI,SAAS;QAClB,gBACE,mEACA;IACJ,OAAO;QACL,gBACE,kFACA;IACJ;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,MAAM;gBACN,IAAI;gBACJ,MAAM;gBACN,aAAa;gBACb,OAAO;gBACP,cAAc;gBACd,UAAU;gBACV,KAAK;gBACL,KAAK;gBACL,MAAM;gBACN,UAAU;gBACV,WAAW,GAAG,aAAa,CAAC,EAAE,WAAW;;;;;;YAG1C,sBACC,8OAAC;gBACC,WAAW,CAAC,eAAe,EACzB,QACI,mBACA,UACA,qBACA,iBACJ;0BAED;;;;;;;;;;;;AAKX;uCAEe"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/components/Company/ConfirmDeleteModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Button from \"@/components/ui/button/Button\";\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  loading?: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n}\r\n\r\nexport default function ConfirmDeleteModal({\r\n  open,\r\n  loading,\r\n  onClose,\r\n  onConfirm,\r\n}: Props) {\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\">\r\n      <div className=\"w-full max-w-md rounded-xl bg-white dark:bg-gray-900 shadow-xl\">\r\n        <div className=\"border-b p-5 dark:border-gray-800\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n            Delete Confirmation\r\n          </h3>\r\n        </div>\r\n\r\n        <div className=\"p-6 text-sm text-gray-600 dark:text-gray-300\">\r\n          Are you sure you want to delete this data?  \r\n          This action cannot be undone.\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3 border-t p-5 dark:border-gray-800\">\r\n          <Button variant=\"outline\" onClick={onClose}>\r\n            Cancel\r\n          </Button>\r\n      <Button\r\n  variant=\"primary\"\r\n  onClick={onConfirm}\r\n  disabled={loading}\r\n  className=\"bg-red-600 hover:bg-red-700 focus:ring-red-500\"\r\n>\r\n  {loading ? \"Deleting...\" : \"Delete\"}\r\n</Button>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWe,SAAS,mBAAmB,EACzC,IAAI,EACJ,OAAO,EACP,OAAO,EACP,SAAS,EACH;IACN,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAG,WAAU;kCAAsD;;;;;;;;;;;8BAKtE,8OAAC;oBAAI,WAAU;8BAA+C;;;;;;8BAK9D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uJAAM;4BAAC,SAAQ;4BAAU,SAAS;sCAAS;;;;;;sCAGhD,8OAAC,uJAAM;4BACX,SAAQ;4BACR,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAO7B"}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/services/api.ts"],"sourcesContent":["// services/api.ts\r\nimport axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  //baseURL: \"/api\",\r\n  baseURL: 'http://localhost:5120/api',\r\n  \r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Attach token automatically\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('access_token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Optional: handle 401 globally\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.clear();\r\n      window.location.href = '/';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;;AAClB;;AAEA,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,kBAAkB;IAClB,SAAS;IAET,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,6BAA6B;AAC7B,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;AAEA,gCAAgC;AAChC,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,aAAa,KAAK;QAClB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/services/company.service.ts"],"sourcesContent":["// services/company.service.ts\r\nimport api from \"./api\";\r\nimport { BranchFormData } from \"@/components/Company/BranchFormModal\";\r\nimport {  CategoryFormData } from \"@/components/Company/CategoryFormModal\";\r\nimport {  CategoryTypeFormDataType } from \"@/components/Company/CategoryTypeFormModal\";\r\nimport {  ProductFormData } from \"@/components/Company/ProductFormModal\";\r\n\r\nexport const CompanyService = {\r\n  // GET ALL\r\n  getAll() {\r\n    return api.get(\"/SetUp/companies\");\r\n  },\r\n\r\n  // GET BY ID\r\n  getById(id: string) {\r\n    return api.get(`/SetUp/get-company/${id}`);\r\n  },\r\n\r\n\r\n      // GET ALL\r\n  getAllBranches() {\r\n    return api.get(\"/SetUp/branches\");\r\n  },\r\n\r\n\r\n\r\n\r\n  // CREATE (FromForm)\r\n  create(data: FormData) {\r\n    return api.post(\"/SetUp/create-company\", data, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n  },\r\n\r\n  // ‚úÖ UPDATE COMPANY (FromForm + route id)\r\n  updateCompany(id: string, data: FormData) {\r\n    return api.put(`/SetUp/edit-company/${id}`, data, {\r\n      headers: {\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      },\r\n    });\r\n  },\r\n\r\n  // DELETE\r\n  delete(id: string) {\r\n    return api.delete(`/SetUp/delete-company/${id}`);\r\n  },\r\n\r\n\r\n\r\n  // GET BY ID\r\n  getByIdBranch(id: string) {\r\n    return api.get(`/SetUp/get-branch/${id}`);\r\n  },\r\n\r\n  // CREATE BRANCH (JSON)\r\n  createBranch(data: BranchFormData) {\r\n    return api.post(\"/SetUp/create-branch\", data);\r\n  },\r\n\r\n  \r\n    // UPDATE BRANCH (JSON)\r\n  updateBranch(id: string, data: BranchFormData) {\r\n    return api.put(`/SetUp/edit-branch/${id}`, data);\r\n  },\r\n\r\n\r\n\r\n  \r\n\r\n\r\n\r\n  // DELETE\r\n  deleteBranch(id: string) {\r\n    return api.delete(`/SetUp/delete-branch/${id}`);\r\n  },\r\n\r\n\r\n\r\n\r\n        // GET ALL\r\n  getAllCategory() {\r\n    return api.get(\"/SetUp/categories\");\r\n  },\r\n\r\n  // CREATE BRANCH (JSON)\r\n  createCategory(data: CategoryFormData) {\r\n    return api.post(\"/SetUp/create-category\", data);\r\n  },\r\n\r\n\r\n  // CREATE BRANCH (JSON)\r\n  createCategoryType(data: CategoryTypeFormDataType) {\r\n    return api.post(\"/Product/create-CategoryType\", data);\r\n  },\r\n\r\n\r\n\r\n    // CREATE BRANCH (JSON)\r\n  CreateProductAsync(data: ProductFormData) {\r\n    return api.post(\"/Product/create-product\", data);\r\n  },\r\n\r\n\r\n\r\n      // UPDATE BRANCH (JSON)\r\n  updateCategoryType(id: string, data: CategoryTypeFormDataType) {\r\n    return api.put(`/Product/edit-CategoryType/${id}`, data);\r\n  },\r\n\r\n\r\n      getAllCategoryTypes() {\r\n    return api.get(\"/Product/category-list\");\r\n  },\r\n   \r\n\r\n        getAllProducts() {\r\n    return api.get(\"/Product/product-list\");\r\n  },\r\n   \r\n\r\n\r\n      // UPDATE CATEGORY (JSON)\r\n  updateCategory(id: string, data: CategoryFormData) {\r\n    return api.put(`/SetUp/edit-category/${id}`, data);\r\n  },\r\n\r\n  \r\n  // DELETE\r\n  deleteCategory(id: string) {\r\n    return api.delete(`/SetUp/delete-category/${id}`);\r\n  },\r\n\r\n\r\n\r\n};\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;AAC9B;;AAMO,MAAM,iBAAiB;IAC5B,UAAU;IACV;QACE,OAAO,iIAAG,CAAC,GAAG,CAAC;IACjB;IAEA,YAAY;IACZ,SAAQ,EAAU;QAChB,OAAO,iIAAG,CAAC,GAAG,CAAC,CAAC,mBAAmB,EAAE,IAAI;IAC3C;IAGI,UAAU;IACd;QACE,OAAO,iIAAG,CAAC,GAAG,CAAC;IACjB;IAKA,oBAAoB;IACpB,QAAO,IAAc;QACnB,OAAO,iIAAG,CAAC,IAAI,CAAC,yBAAyB,MAAM;YAC7C,SAAS;gBACP,gBAAgB;YAClB;QACF;IACF;IAEA,yCAAyC;IACzC,eAAc,EAAU,EAAE,IAAc;QACtC,OAAO,iIAAG,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,IAAI,EAAE,MAAM;YAChD,SAAS;gBACP,gBAAgB;YAClB;QACF;IACF;IAEA,SAAS;IACT,QAAO,EAAU;QACf,OAAO,iIAAG,CAAC,MAAM,CAAC,CAAC,sBAAsB,EAAE,IAAI;IACjD;IAIA,YAAY;IACZ,eAAc,EAAU;QACtB,OAAO,iIAAG,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,IAAI;IAC1C;IAEA,uBAAuB;IACvB,cAAa,IAAoB;QAC/B,OAAO,iIAAG,CAAC,IAAI,CAAC,wBAAwB;IAC1C;IAGE,uBAAuB;IACzB,cAAa,EAAU,EAAE,IAAoB;QAC3C,OAAO,iIAAG,CAAC,GAAG,CAAC,CAAC,mBAAmB,EAAE,IAAI,EAAE;IAC7C;IAQA,SAAS;IACT,cAAa,EAAU;QACrB,OAAO,iIAAG,CAAC,MAAM,CAAC,CAAC,qBAAqB,EAAE,IAAI;IAChD;IAKM,UAAU;IAChB;QACE,OAAO,iIAAG,CAAC,GAAG,CAAC;IACjB;IAEA,uBAAuB;IACvB,gBAAe,IAAsB;QACnC,OAAO,iIAAG,CAAC,IAAI,CAAC,0BAA0B;IAC5C;IAGA,uBAAuB;IACvB,oBAAmB,IAA8B;QAC/C,OAAO,iIAAG,CAAC,IAAI,CAAC,gCAAgC;IAClD;IAIE,uBAAuB;IACzB,oBAAmB,IAAqB;QACtC,OAAO,iIAAG,CAAC,IAAI,CAAC,2BAA2B;IAC7C;IAII,uBAAuB;IAC3B,oBAAmB,EAAU,EAAE,IAA8B;QAC3D,OAAO,iIAAG,CAAC,GAAG,CAAC,CAAC,2BAA2B,EAAE,IAAI,EAAE;IACrD;IAGI;QACF,OAAO,iIAAG,CAAC,GAAG,CAAC;IACjB;IAGM;QACJ,OAAO,iIAAG,CAAC,GAAG,CAAC;IACjB;IAII,yBAAyB;IAC7B,gBAAe,EAAU,EAAE,IAAsB;QAC/C,OAAO,iIAAG,CAAC,GAAG,CAAC,CAAC,qBAAqB,EAAE,IAAI,EAAE;IAC/C;IAGA,SAAS;IACT,gBAAe,EAAU;QACvB,OAAO,iIAAG,CAAC,MAAM,CAAC,CAAC,uBAAuB,EAAE,IAAI;IAClD;AAIF"}},
    {"offset": {"line": 411, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/components/form/Label.tsx"],"sourcesContent":["import React, { FC, ReactNode } from \"react\";\nimport { twMerge } from \"tailwind-merge\";\n\ninterface LabelProps {\n  htmlFor?: string;\n  children: ReactNode;\n  className?: string;\n}\n\nconst Label: FC<LabelProps> = ({ htmlFor, children, className }) => {\n  return (\n    <label\n      htmlFor={htmlFor}\n      className={twMerge(\n        // Default classes that apply by default\n        \"mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400\",\n\n        // User-defined className that can override the default margin\n        className\n      )}\n    >\n      {children}\n    </label>\n  );\n};\n\nexport default Label;\n"],"names":[],"mappings":";;;;;AACA;;;AAQA,MAAM,QAAwB,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE;IAC7D,qBACE,8OAAC;QACC,SAAS;QACT,WAAW,IAAA,sKAAO,EAChB,wCAAwC;QACxC,qEAEA,8DAA8D;QAC9D;kBAGD;;;;;;AAGP;uCAEe"}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/components/Company/ProductFormModal.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Button from \"@/components/ui/button/Button\";\r\nimport Input from \"@/components/form/input/InputField\";\r\nimport Label from \"@/components/form/Label\";\r\nimport { CompanyService } from \"@/services/company.service\";\r\nimport toast from \"react-hot-toast\";\r\n\r\n/* =========================\r\n   Types (FIXED NAMES)\r\n========================= */\r\nexport interface ProductFormData {\r\n  categoryId: string;\r\n  categoryTypeId: string;\r\n  branchId: string;\r\n  quantity: string;\r\n  minStockLevel: string;\r\n  name: string;\r\n  description: string;\r\n  unit: string;\r\n  costPrice: string;\r\n  wholesalePrice: string;\r\n  sellPrice: string; // Added sellPrice\r\n}\r\n\r\ninterface Option {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface Branch {\r\n  id: string;\r\n  branchName: string;\r\n}\r\n\r\ninterface Props {\r\n  open: boolean;\r\n  mode: \"add\" | \"edit\";\r\n  initialData?: ProductFormData;\r\n  onClose: () => void;\r\n  onSubmit: (data: ProductFormData) => void;\r\n}\r\n\r\nconst emptyForm: ProductFormData = {\r\n  categoryId: \"\",\r\n  categoryTypeId: \"\",\r\n  branchId: \"\",\r\n  quantity: \"\",\r\n  minStockLevel: \"\",\r\n  name: \"\",\r\n  description: \"\",\r\n  unit: \"\",\r\n  costPrice: \"\",\r\n  wholesalePrice: \"\",\r\n  sellPrice: \"\", // Added sellPrice\r\n};\r\n\r\nexport default function ProductFormModal({\r\n  open,\r\n  mode,\r\n  initialData,\r\n  onClose,\r\n  onSubmit,\r\n}: Props) {\r\n  const [form, setForm] = useState<ProductFormData>(emptyForm);\r\n  const [loading, setLoading] = useState(false);\r\n  const [categories, setCategories] = useState<Option[]>([]);\r\n  const [categoryTypes, setCategoryTypes] = useState<Option[]>([]);\r\n  const [branches, setBranches] = useState<Branch[]>([]);\r\n\r\n  /* =========================\r\n     LOAD DROPDOWNS (FIXED)\r\n  ========================= */\r\n  useEffect(() => {\r\n    if (!open) return;\r\n\r\n    Promise.all([\r\n      CompanyService.getAllCategory(),\r\n      CompanyService.getAllCategoryTypes(),\r\n      CompanyService.getAllBranches(),\r\n    ])\r\n      .then(([c, ct, b]) => {\r\n        setCategories(c.data.data || []);\r\n        setCategoryTypes(ct.data.data || []);\r\n        setBranches(b.data.data || []);\r\n      })\r\n      .catch(() => toast.error(\"Failed to load dropdown data\"));\r\n  }, [open]);\r\n\r\n  /* =========================\r\n     INIT FORM\r\n  ========================= */\r\n  useEffect(() => {\r\n    setForm(mode === \"edit\" && initialData ? initialData : emptyForm);\r\n  }, [mode, initialData, open]);\r\n\r\n  const update = (k: keyof ProductFormData, v: string) =>\r\n    setForm((p) => ({ ...p, [k]: v }));\r\n\r\n  const validate = () => {\r\n    if (!form.name) return toast.error(\"Product name is required\"), false;\r\n    if (!form.categoryId) return toast.error(\"Category is required\"), false;\r\n    if (!form.categoryTypeId) return toast.error(\"Category type is required\"), false;\r\n    if (!form.branchId) return toast.error(\"Branch is required\"), false;\r\n    return true;\r\n  };\r\n\r\n  const submit = async () => {\r\n    if (!validate() || loading) return;\r\n    setLoading(true);\r\n    await onSubmit(form);\r\n    setLoading(false);\r\n  };\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity duration-200\">\r\n      <div className=\"w-full max-w-4xl mx-4 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-800 animate-in zoom-in-95 duration-200\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-100 dark:border-gray-800\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg\">\r\n              <svg className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n              </svg>\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                {mode === \"add\" ? \"Add New Product\" : \"Edit Product\"}\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n                {mode === \"add\" ? \"Fill in the details to add a new product\" : \"Update the product information\"}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors duration-200\"\r\n          >\r\n            <svg className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Body */}\r\n        <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            \r\n            {/* LEFT COLUMN */}\r\n            <div className=\"space-y-6\">\r\n              <Field label=\"Product Name\" required>\r\n                <Input\r\n                  value={form.name}\r\n                  onChange={(e) => update(\"name\", e.target.value)}\r\n                  placeholder=\"Enter product name\"\r\n                  className=\"w-full\"\r\n                />\r\n              </Field>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <Field label=\"Quantity\">\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={form.quantity}\r\n                    onChange={(e) => update(\"quantity\", e.target.value)}\r\n                    placeholder=\"0\"\r\n                    min=\"0\"\r\n                  />\r\n                </Field>\r\n\r\n                <Field label=\"Min Stock Level\">\r\n                  <Input\r\n                    type=\"number\"\r\n                    value={form.minStockLevel}\r\n                    onChange={(e) => update(\"minStockLevel\", e.target.value)}\r\n                    placeholder=\"0\"\r\n                    min=\"0\"\r\n                  />\r\n                </Field>\r\n              </div>\r\n\r\n              <Field label=\"Category\" required>\r\n                <select\r\n                  className=\"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200\"\r\n                  value={form.categoryId}\r\n                  onChange={(e) => update(\"categoryId\", e.target.value)}\r\n                >\r\n                  <option value=\"\" className=\"text-gray-400\">Select Category</option>\r\n                  {categories.map((c) => (\r\n                    <option key={c.id} value={c.id} className=\"py-2\">\r\n                      {c.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </Field>\r\n\r\n              <Field label=\"Category Type\" required>\r\n                <select\r\n                  className=\"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200\"\r\n                  value={form.categoryTypeId}\r\n                  onChange={(e) => update(\"categoryTypeId\", e.target.value)}\r\n                >\r\n                  <option value=\"\" className=\"text-gray-400\">Select Category Type</option>\r\n                  {categoryTypes.map((ct) => (\r\n                    <option key={ct.id} value={ct.id} className=\"py-2\">\r\n                      {ct.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </Field>\r\n            </div>\r\n\r\n            {/* RIGHT COLUMN */}\r\n            <div className=\"space-y-6\">\r\n              <Field label=\"Branch\" required>\r\n                <select\r\n                  className=\"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200\"\r\n                  value={form.branchId}\r\n                  onChange={(e) => update(\"branchId\", e.target.value)}\r\n                >\r\n                  <option value=\"\" className=\"text-gray-400\">Select Branch</option>\r\n                  {branches.map((b) => (\r\n                    <option key={b.id} value={b.id} className=\"py-2\">\r\n                      {b.branchName}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </Field>\r\n\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <Field label=\"Unit\">\r\n                  <select\r\n                    className=\"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all duration-200\"\r\n                    value={form.unit}\r\n                    onChange={(e) => update(\"unit\", e.target.value)}\r\n                  >\r\n                    <option value=\"\" className=\"text-gray-400\">Select Unit</option>\r\n                    <option value=\"kg\" className=\"py-2\">Kg</option>\r\n                    <option value=\"bag\" className=\"py-2\">Bag</option>\r\n                    <option value=\"box\" className=\"py-2\">Box</option>\r\n                  </select>\r\n                </Field>\r\n              </div>\r\n\r\n              {/* PRICE SECTION - Updated to 3 columns */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <Field label=\"Cost Price\">\r\n                  <div className=\"relative\">\r\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400\">\r\n                      $\r\n                    </span>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={form.costPrice}\r\n                      onChange={(e) => update(\"costPrice\", e.target.value)}\r\n                      placeholder=\"0.00\"\r\n                      min=\"0\"\r\n                      className=\"pl-8 w-full\"\r\n                    />\r\n                  </div>\r\n                </Field>\r\n\r\n                <Field label=\"Wholesale Price\">\r\n                  <div className=\"relative\">\r\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400\">\r\n                      $\r\n                    </span>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={form.wholesalePrice}\r\n                      onChange={(e) => update(\"wholesalePrice\", e.target.value)}\r\n                      placeholder=\"0.00\"\r\n                      min=\"0\"\r\n                      className=\"pl-8 w-full\"\r\n                    />\r\n                  </div>\r\n                </Field>\r\n\r\n                <Field label=\"Sell Price\">\r\n                  <div className=\"relative\">\r\n                    <span className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 dark:text-gray-400\">\r\n                      $\r\n                    </span>\r\n                    <Input\r\n                      type=\"number\"\r\n                      value={form.sellPrice}\r\n                      onChange={(e) => update(\"sellPrice\", e.target.value)}\r\n                      placeholder=\"0.00\"\r\n                      min=\"0\"\r\n                      className=\"pl-8 w-full\"\r\n                    />\r\n                  </div>\r\n                </Field>\r\n              </div>\r\n\r\n              <Field label=\"Description\">\r\n                <textarea\r\n                  value={form.description}\r\n                  onChange={(e) => update(\"description\", e.target.value)}\r\n                  placeholder=\"Enter product description (optional)\"\r\n                  rows={3}\r\n                  className=\"w-full px-3 py-2.5 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none transition-all duration-200\"\r\n                />\r\n              </Field>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"p-6 border-t border-gray-100 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              Fields marked with <span className=\"text-red-500\">*</span> are required\r\n            </div>\r\n            <div className=\"flex gap-3\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={onClose}\r\n                className=\"px-6 py-2.5 border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200\"\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                onClick={submit}\r\n                disabled={loading}\r\n                className=\"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                    Saving...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n                    </svg>\r\n                    {mode === \"add\" ? \"Add Product\" : \"Update Product\"}\r\n                  </>\r\n                )}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* =========================\r\n   Field Helper Component\r\n========================= */\r\nfunction Field({ label, children, required, className = \"\" }: { label: string; children: React.ReactNode; required?: boolean; className?: string }) {\r\n  return (\r\n    <div className={`space-y-2 ${className}`}>\r\n      <Label className=\"flex items-center gap-1 text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n        {label}\r\n        {required && <span className=\"text-red-500\">*</span>}\r\n      </Label>\r\n      {children}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1171, "column": 0}, "map": {"version":3,"sources":["file:///D:/Developments/free-nextjs-admin-dashboard-main/free-nextjs-admin-dashboard-main/src/components/Company/CategoryTypeTable.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Button from \"@/components/ui/button/Button\";\r\nimport Input from \"@/components/form/input/InputField\";\r\nimport ConfirmDeleteModal from \"./ConfirmDeleteModal\";\r\nimport { CompanyService } from \"@/services/company.service\";\r\nimport toast from \"react-hot-toast\";\r\nimport ProductFormModal, { ProductFormData } from \"./ProductFormModal\";\r\n\r\n/* =========================\r\n   Types\r\n========================= */\r\ninterface ProductDto {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n\r\n  categoryId: string;\r\n  categoryName: string;\r\n\r\n  categoryTypeId: string;\r\n  categoryTypeName: string;\r\n\r\n  branchId: string;\r\n  branchName: string;\r\n\r\n  quantity: string;\r\n  unit: string;\r\n  costPrice: string;\r\n  wholesalePrice: string;\r\n\r\n  createdAt: string;\r\n  createdBy: string;\r\n}\r\n\r\n/* =========================\r\n   Action Menu (UNCHANGED)\r\n========================= */\r\nfunction ActionMenu({\r\n  openUp,\r\n  onEdit,\r\n  onDelete,\r\n}: {\r\n  openUp?: boolean;\r\n  onEdit: () => void;\r\n  onDelete: () => void;\r\n}) {\r\n  const [open, setOpen] = useState(false);\r\n  const ref = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(e: MouseEvent) {\r\n      if (ref.current && !ref.current.contains(e.target as Node)) {\r\n        setOpen(false);\r\n      }\r\n    }\r\n    if (open) document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () =>\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, [open]);\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative\">\r\n      <button\r\n        onClick={() => setOpen((p) => !p)}\r\n        className=\"rounded-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n      >\r\n        ‚ãÆ\r\n      </button>\r\n\r\n      {open && (\r\n        <div\r\n          className={`absolute right-0 z-50 w-36 rounded-lg border bg-white shadow-lg\r\n          dark:border-gray-700 dark:bg-gray-900\r\n          ${openUp ? \"bottom-full mb-2\" : \"top-full mt-2\"}`}\r\n        >\r\n          <button\r\n            onClick={() => {\r\n              onEdit();\r\n              setOpen(false);\r\n            }}\r\n            className=\"flex w-full gap-2 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-800\"\r\n          >\r\n            ‚úèÔ∏è Edit\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => {\r\n              onDelete();\r\n              setOpen(false);\r\n            }}\r\n            className=\"flex w-full gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20\"\r\n          >\r\n            üóë Delete\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* =========================\r\n   Product Table\r\n========================= */\r\nexport default function ProductTable() {\r\n  const [products, setProducts] = useState<ProductDto[]>([]);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  const [openModal, setOpenModal] = useState(false);\r\n  const [mode, setMode] = useState<\"add\" | \"edit\">(\"add\");\r\n  const [selectedProduct, setSelectedProduct] = useState<ProductDto | null>(null);\r\n\r\n  const [openDelete, setOpenDelete] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /* =========================\r\n     LOAD PRODUCTS\r\n  ========================= */\r\n  async function loadProducts() {\r\n    setLoading(true);\r\n    try {\r\n      // ‚ö†Ô∏è uses SAME pattern as other tables\r\n      const res = await CompanyService.getAllProducts?.();\r\n      setProducts(res?.data?.data || []);\r\n    } catch (err: any) {\r\n      toast.error(\"Failed to load products\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, []);\r\n\r\n  /* =========================\r\n     ADD / UPDATE\r\n  ========================= */\r\n  async function handleSubmit(data: ProductFormData) {\r\n    try {\r\n      if (mode === \"add\") {\r\n        await CompanyService.CreateProductAsync?.(data);\r\n        toast.success(\"Product created successfully\");\r\n      } else {\r\n        if (!selectedProduct?.id) {\r\n          toast.error(\"Product ID missing\");\r\n          return;\r\n        }\r\n\r\n        // await CompanyService.updateProduct?.(selectedProduct.id, data);\r\n        // toast.success(\"Product updated successfully\");\r\n      }\r\n\r\n      setOpenModal(false);\r\n      loadProducts();\r\n    } catch {\r\n      toast.error(\"Operation failed\");\r\n    }\r\n  }\r\n\r\n  /* =========================\r\n     DELETE\r\n  ========================= */\r\n  async function confirmDelete() {\r\n    if (!selectedProduct) return;\r\n\r\n    try {\r\n      setDeleting(true);\r\n      // await CompanyService.deleteProduct?.(selectedProduct.id);\r\n      // toast.success(\"Product deleted successfully\");\r\n      setOpenDelete(false);\r\n      loadProducts();\r\n    } catch {\r\n      toast.error(\"Failed to delete product\");\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  }\r\n\r\n  /* =========================\r\n     FILTER\r\n  ========================= */\r\n  const filteredProducts = products.filter((p) =>\r\n    p.name.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"w-full rounded-xl bg-white px-6 pb-6 dark:bg-gray-900\">\r\n      <h2 className=\"mb-4 text-xl font-semibold text-gray-800 dark:text-white\">\r\n        Products\r\n      </h2>\r\n\r\n      {/* Top Bar */}\r\n      <div className=\"mb-4 flex items-center justify-between\">\r\n        <Input\r\n          placeholder=\"Search products...\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"w-64\"\r\n        />\r\n        <Button\r\n          size=\"sm\"\r\n          onClick={() => {\r\n            setMode(\"add\");\r\n            setSelectedProduct(null);\r\n            setOpenModal(true);\r\n          }}\r\n        >\r\n          + Add Product\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full border-collapse\">\r\n          <thead className=\"bg-gray-50 dark:bg-gray-800\">\r\n            <tr className=\"text-left text-sm text-gray-600 dark:text-gray-300\">\r\n              <th className=\"px-3 py-3\">Name</th>\r\n              <th className=\"px-3 py-3\">Category</th>\r\n              <th className=\"px-3 py-3\">Type</th>\r\n              <th className=\"px-3 py-3\">Branch</th>\r\n              <th className=\"px-3 py-3\">Qty</th>\r\n              <th className=\"px-3 py-3\">Created At</th>\r\n              <th className=\"px-3 py-3 text-right\">Action</th>\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan={7} className=\"py-6 text-center text-sm\">\r\n                  Loading products...\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              filteredProducts.map((p, i) => (\r\n                <tr\r\n                  key={p.id}\r\n                  className=\"border-t hover:bg-gray-50 dark:hover:bg-gray-800 transition\"\r\n                >\r\n                  <td className=\"px-3 text-sm\">{p.name}</td>\r\n                  <td className=\"px-3 text-sm\">{p.categoryName}</td>\r\n                  <td className=\"px-3 text-sm\">{p.categoryTypeName}</td>\r\n                  <td className=\"px-3 text-sm\">{p.branchName}</td>\r\n                  <td className=\"px-3 text-sm\">{p.quantity}</td>\r\n                  <td className=\"px-3 text-sm\">\r\n                    {new Date(p.createdAt).toISOString().split(\"T\")[0]}\r\n                  </td>\r\n\r\n                  <td className=\"px-3 text-right\">\r\n                    <ActionMenu\r\n                      openUp={i === filteredProducts.length - 1}\r\n                      onEdit={() => {\r\n                        setMode(\"edit\");\r\n                        setSelectedProduct(p);\r\n                        setOpenModal(true);\r\n                      }}\r\n                      onDelete={() => {\r\n                        setSelectedProduct(p);\r\n                        setOpenDelete(true);\r\n                      }}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* ADD / EDIT MODAL */}\r\n      <ProductFormModal\r\n        open={openModal}\r\n        mode={mode}\r\n        initialData={\r\n          selectedProduct\r\n            ? {\r\n                name: selectedProduct.name,\r\n                description: selectedProduct.description,\r\n                categoryId: selectedProduct.categoryId,\r\n                categoryTypeId: selectedProduct.categoryTypeId,\r\n                branchId: selectedProduct.branchId,\r\n                quantity: selectedProduct.quantity,\r\n                unit: selectedProduct.unit,\r\n                costPrice: selectedProduct.costPrice,\r\n                wholesalePrice: selectedProduct.wholesalePrice,\r\n                minStockLevel: \"\",\r\n              }\r\n            : undefined\r\n        }\r\n        onClose={() => setOpenModal(false)}\r\n        onSubmit={handleSubmit}\r\n      />\r\n\r\n      {/* DELETE CONFIRM */}\r\n      <ConfirmDeleteModal\r\n        open={openDelete}\r\n        loading={deleting}\r\n        onClose={() => setOpenDelete(false)}\r\n        onConfirm={confirmDelete}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}